"""
Конфигурационный файл для оптимизированной Parabolic SAR стратегии
"""

# =============================================================================
# НАСТРОЙКИ ДАННЫХ
# =============================================================================

# Символы для анализа
SYMBOLS = [
    "FARTCOINUSDT",
    "SOLUSDT",
    "BTCUSDT",
    "ETHUSDT",
    "ADAUSDT",
    "DOTUSDT",
    "LINKUSDT",
    "AVAXUSDT"
]

# Таймфреймы (в минутах)
TIMEFRAMES = {
    "1m": 1,
    "5m": 5,
    "15m": 15,
    "30m": 30,
    "1h": 60,
    "4h": 240,
    "1d": 1440
}

# Основной таймфрейм для анализа
PRIMARY_TIMEFRAME = "15m"

# Период для получения данных
START_DATE = "2025-05-01"  # YYYY-MM-DD
END_DATE = "2025-08-14"    # YYYY-MM-DD

# =============================================================================
# НАСТРОЙКИ PARABOLIC SAR СТРАТЕГИИ
# =============================================================================

# Режим стратегии: 'classic', 'contrarian', 'optimized'
STRATEGY_MODE = 'classic'  # Вернул к классической логике для стабильности

PSAR_CONFIG = {
    "start": 0.015,         # Уменьшил с 0.02 до 0.015 для менее агрессивного SAR
    "increment": 0.015,     # Уменьшил с 0.02 до 0.015 для плавности
    "maximum": 0.15,        # Уменьшил с 0.2 до 0.15 для стабильности
    "warmup_periods": 75,   # Увеличил с 50 до 75 для лучшей стабилизации
    "strategy_mode": STRATEGY_MODE
}

# =============================================================================
# НАСТРОЙКИ ТОРГОВОЙ ЛОГИКИ
# =============================================================================

# Управление рисками
RISK_CONFIG = {
    "risk_per_trade": 50,              # Снизил с 1.0 до 0.8 для консервативности
    "initial_capital": 10000,           # Начальный капитал
    "stop_loss_atr_multiplier_long": 1.5,    # Меньший стоп для лонгов
    "stop_loss_atr_multiplier_short": 4.2,   # Больший стоп для шортов
    "take_profit_atr_multiplier_long": 5.5,  # Больший тейк для лонгов
    "take_profit_atr_multiplier_short": 4.0, # Меньший тейк для шортов
    "max_positions": 5,                 # Максимум 1 позиция одновременно
    "min_trade_interval_minutes": 0     # Убрал интервал для более активной торговли
}
# RISK_CONFIG = {
#     "risk_per_trade": 1.0,              # Еще более консервативный риск
#     "initial_capital": 10000,
#     "max_positions": 1,
#     "min_trade_interval_minutes": 0     # Убираем интервал - торгуем по каждому сигналу SAR
# }


# =============================================================================
# НАСТРОЙКИ ФИЛЬТРОВ КАЧЕСТВА (только для optimized режима)
# =============================================================================

QUALITY_FILTERS = {
    "min_volatility_percent": 1.5,      # Еще выше для отсеивания слабых движений
    "rsi_long_min": 45,                 # Еще более узкие границы RSI
    "rsi_long_max": 65,
    "rsi_short_min": 35,
    "rsi_short_max": 65,
    "require_trend_confirmation": True,
    "require_breakout_confirmation": True,  # Включил подтверждение пробоя
    "min_trend_strength": 0.02,         # Минимальная сила тренда 2%
    "volume_multiplier": 1.2            # Объем выше среднего на 20%
}


# =============================================================================
# НАСТРОЙКИ БЭКТЕСТИНГА
# =============================================================================

BACKTEST_CONFIG = {
    "commission": 0.004,       # Комиссия 0.4%
    "slippage": 0.0001,         # Проскальзывание 0.01%
    "compound_returns": True,    # Реинвестирование прибыли
    "detailed_logs": True       # Подробные логи сделок
}

# =============================================================================
# НАСТРОЙКИ ВЫВОДА
# =============================================================================

OUTPUT_CONFIG = {
    "save_results": True,
    "results_dir": "backtest_results",
    "plot_charts": True,
    "export_trades": True,
    "generate_report": True
}
